<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
  body {
    margin: 0;
    font-family: "Cairo", sans-serif;
    background: linear-gradient(120deg, #0f2027, #203a43, #2c5364);
    background-size: 400% 400%;
    animation: gradientBG 12s ease infinite;
    color: #fff;
    text-align: center;
    direction: rtl;
  }
  @keyframes gradientBG {
    0% {background-position: 0% 50%;}
    50% {background-position: 100% 50%;}
    100% {background-position: 0% 50%;}
  }
  h1 {margin-top:30px; font-size:42px; font-weight:bold; text-shadow:0 0 20px rgba(255,255,255,0.5);}
  .card {
    backdrop-filter: blur(12px);
    background: rgba(255,255,255,0.1);
    border-radius:20px;
    padding:25px;
    margin:20px auto;
    width:90%;
    max-width:800px;
    box-shadow:0 8px 30px rgba(0,0,0,0.5);
  }
  select, button {
    padding:14px;
    margin:10px;
    border-radius:12px;
    border:none;
    font-size:18px;
    cursor:pointer;
  }
  select {width:90%; max-width:300px;}
  button {background:#f39c12; color:#fff; font-weight:bold; transition:0.3s;}
  button:hover {background:#e67e22;}
  table {margin:20px auto; border-collapse:collapse; width:100%;}
  th, td {padding:16px; border-bottom:1px solid rgba(255,255,255,0.2); font-size:20px;}
  th {background: rgba(255,255,255,0.15);}
  td i {margin-left:10px; color:#f1c40f;}
  .next-prayer {margin-top:20px; font-size:28px; font-weight:bold; color:#2ecc71; text-shadow:0 0 12px rgba(46,204,113,0.7);}
  .countdown {font-size:34px; margin-top:10px; font-weight:bold; color:#f39c12;}
  .modal {
    display:none;
    position:fixed;
    top:0; left:0;
    width:100%; height:100%;
    background:rgba(0,0,0,0.85);
    justify-content:center;
    align-items:center;
    z-index:1000;
  }
  .modal-content {
    background:#fff; color:#333;
    padding:30px;
    border-radius:20px;
    text-align:center;
    width:85%; max-width:400px;
    box-shadow:0 10px 40px rgba(0,0,0,0.5);
  }
  .modal-content h2 {margin-bottom:15px;}
  .modal-content button {background:#2ecc71; color:#fff; font-size:18px; padding:10px 20px; border-radius:10px;}
  .footer {margin-top:30px; font-size:14px; color:rgba(255,255,255,0.6);}
  @media (max-width:600px) {
    h1 {font-size:32px;}
    .next-prayer {font-size:24px;}
    .countdown {font-size:28px;}
    th, td {font-size:18px; padding:12px;}
    select, button {font-size:16px; padding:12px;}
  }
</style>
</head>
<body>
<h1>ğŸŒ™ Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©</h1>

<div class="card">
  <label for="city">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©:</label><br>
  <select id="city">
    <optgroup label="ğŸ‡¹ğŸ‡· ØªØ±ÙƒÙŠØ§">
      <option value="Istanbul">Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„</option>
      <option value="Ankara">Ø£Ù†Ù‚Ø±Ø©</option>
      <option value="Izmir">Ø¥Ø²Ù…ÙŠØ±</option>
      <option value="Adiyaman">Ø£Ø¯ÙŠØ§Ù…Ø§Ù†</option>
      <option value="Gaziantep">ØºØ§Ø²ÙŠ Ø¹Ù†ØªØ§Ø¨</option>
      <option value="Bursa">Ø¨ÙˆØ±ØµØ©</option>
      <option value="Antalya">Ø£Ù†Ø·Ø§Ù„ÙŠØ§</option>
      <option value="Konya">Ù‚ÙˆÙ†ÙŠØ©</option>
      <option value="Kayseri">Ù‚ÙŠØµØ±ÙŠ</option>
      <option value="Trabzon">Ø·Ø±Ø§Ø¨Ø²ÙˆÙ†</option>
      <option value="Sanliurfa">Ø´Ø§Ù†Ù„ÙŠ Ø£ÙˆØ±ÙØ§</option>
      <option value="Mardin">Ù…Ø§Ø±Ø¯ÙŠÙ†</option>
      <option value="Hatay">Ù‡Ø§ØªØ§ÙŠ</option>
      <option value="Malatya">Ù…Ù„Ø§Ø·ÙŠØ©</option>
      <option value="Diyarbakir">Ø¯ÙŠØ§Ø± Ø¨ÙƒØ±</option>
      <option value="Van">ÙˆØ§Ù†</option>
      <option value="Erzurum">Ø£Ø±Ø¶Ø±ÙˆÙ…</option>
      <option value="Samsun">Ø³Ø§Ù…Ø³ÙˆÙ†</option>
      <option value="Adana">Ø£Ø¶Ù†Ø©</option>
      <option value="Eskisehir">Ø£Ø³ÙƒÙŠ Ø´Ù‡ÙŠØ±</option>
    </optgroup>
    <optgroup label="ğŸ‡¸ğŸ‡¾ Ø³ÙˆØ±ÙŠØ§">
      <option value="Damascus">Ø¯Ù…Ø´Ù‚</option>
      <option value="Aleppo">Ø­Ù„Ø¨</option>
      <option value="Homs">Ø­Ù…Øµ</option>
      <option value="Latakia">Ø§Ù„Ù„Ø§Ø°Ù‚ÙŠØ©</option>
      <option value="Hama">Ø­Ù…Ø§Ø©</option>
      <option value="Idlib">Ø¥Ø¯Ù„Ø¨</option>
      <option value="Daraa">Ø¯Ø±Ø¹Ø§</option>
      <option value="Raqqa">Ø§Ù„Ø±Ù‚Ø©</option>
      <option value="Deir Ezzor">Ø¯ÙŠØ± Ø§Ù„Ø²ÙˆØ±</option>
      <option value="Hasakah">Ø§Ù„Ø­Ø³ÙƒØ©</option>
    </optgroup>
  </select><br>
  <button onclick="getPrayerTimes()">Ø¹Ø±Ø¶ Ø§Ù„Ø£ÙˆÙ‚Ø§Øª</button>
</div>

<div class="card" id="prayerCard" style="display:none;">
  <table id="prayerTable">
    <thead><tr><th>Ø§Ù„ØµÙ„Ø§Ø©</th><th>Ø§Ù„ÙˆÙ‚Øª</th></tr></thead>
    <tbody></tbody>
  </table>
  <div class="next-prayer" id="nextPrayer"></div>
  <div class="countdown" id="countdown"></div>
</div>

<div class="modal" id="adhanModal">
  <div class="modal-content">
    <h2>ğŸ•Œ Ø­Ø§Ù† ÙˆÙ‚Øª Ø§Ù„ØµÙ„Ø§Ø©</h2>
    <p id="modalPrayer"></p>
    <button onclick="closeModal()">Ø­Ø³Ù†Ø§Ù‹</button>
  </div>
</div>

<audio id="adhanAudio" src="https://www.islamcan.com/audio/adhan/azan1.mp3"></audio>
<div class="footer">Â© 2025     Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© | Ù…Ù†ØµÙˆØ± Ø§Ù„Ø­Ø¬ÙŠ  </div>

<script>
let countdownInterval;

async function getPrayerTimes() {
  let city = document.getElementById("city").value;
  let country = cityInSyria(city) ? "Syria" : "Turkey";
  let method = country==="Turkey"?12:4;
  let url = `https://api.aladhan.com/v1/timingsByCity?city=${city}&country=${country}&method=${method}&school=0`;
  try {
    let res = await fetch(url);
    let data = await res.json();
    if(!data.data) {alert("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø£ÙˆÙ‚Ø§Øª"); return;}
    let timings = data.data.timings;
    let tbody = document.querySelector("#prayerTable tbody");
    tbody.innerHTML = "";
    let prayers = {
      Fajr:{name:"Ø§Ù„ÙØ¬Ø±", icon:"fa-moon"},
      Sunrise:{name:"Ø§Ù„Ø´Ø±ÙˆÙ‚", icon:"fa-sun"},
      Dhuhr:{name:"Ø§Ù„Ø¸Ù‡Ø±", icon:"fa-sun"},
      Asr:{name:"Ø§Ù„Ø¹ØµØ±", icon:"fa-cloud-sun"},
      Maghrib:{name:"Ø§Ù„Ù…ØºØ±Ø¨", icon:"fa-sunset"},
      Isha:{name:"Ø§Ù„Ø¹Ø´Ø§Ø¡", icon:"fa-moon-stars"}
    };
    for(let key in prayers){
      tbody.innerHTML+=`<tr><td><i class="fa-solid ${prayers[key].icon}"></i>${prayers[key].name}</td><td>${timings[key]}</td></tr>`;
    }
    document.getElementById("prayerCard").style.display="block";
    checkNextPrayer(timings);
  } catch(err){
    alert("ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù€ API");
    console.error(err);
  }
}

function checkNextPrayer(timings){
  clearInterval(countdownInterval);
  let now=new Date();
  let currentMinutes=now.getHours()*60+now.getMinutes();
  let prayersOrder=[
    {key:"Fajr", name:"Ø§Ù„ÙØ¬Ø±"},
    {key:"Dhuhr", name:"Ø§Ù„Ø¸Ù‡Ø±"},
    {key:"Asr", name:"Ø§Ù„Ø¹ØµØ±"},
    {key:"Maghrib", name:"Ø§Ù„Ù…ØºØ±Ø¨"},
    {key:"Isha", name:"Ø§Ù„Ø¹Ø´Ø§Ø¡"}
  ];
  let nextPrayer=null;
  for(let p of prayersOrder){
    let [h,m]=timings[p.key].split(":").map(Number);
    let prayerMinutes=h*60+m;
    if(prayerMinutes>currentMinutes){
      nextPrayer={...p,time:timings[p.key],minutes:prayerMinutes};
      break;
    }
  }
  if(!nextPrayer){nextPrayer={key:"Fajr",name:"Ø§Ù„ÙØ¬Ø±",time:timings["Fajr"],minutes:null};}
  document.getElementById("nextPrayer").innerText=`ğŸ•Œ Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©: ${nextPrayer.name} - ${nextPrayer.time}`;
  if(nextPrayer.minutes){
    countdownInterval=setInterval(()=>{
      let now=new Date();
      let diff=(nextPrayer.minutes*60-(now.getHours()*3600+now.getMinutes()*60+now.getSeconds()));
      if(diff<=0){clearInterval(countdownInterval); playAdhan(nextPrayer.name); return;}
      let h=Math.floor(diff/3600);
      let m=Math.floor((diff%3600)/60);
      let s=diff%60;
      document.getElementById("countdown").innerText=`â³ Ù…ØªØ¨Ù‚ÙŠ: ${h.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`;
    },1000);
  }
}

function playAdhan(prayerName){
  document.getElementById("adhanAudio").play();
  document.getElementById("modalPrayer").innerText="ØµÙ„Ø§Ø© "+prayerName;
  document.getElementById("adhanModal").style.display="flex";
}

function closeModal(){document.getElementById("adhanModal").style.display="none";}

function cityInSyria(city){
  let syria=["Damascus","Aleppo","Homs","Latakia","Hama","Idlib","Daraa","Raqqa","Deir Ezzor","Hasakah"];
  return syria.includes(city);
}
</script>
</body>
</html>